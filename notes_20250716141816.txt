-- ðŸŒ™ Pet Predictor â€“ Mobile-Friendly Script

-- Wait for game to fully load
repeat wait() until game:IsLoaded()

-- Services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")

-- Player references
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Egg-to-pet mapping
local eggToPets = {
    ["Common Egg"] = {"Dog","Golden Lab","Bunny"},
    ["Uncommon Egg"] = {"Black Bunny","Cat","Chicken","Deer"},
    ["Rare Egg"] = {"Monkey","Orange Tabby","Pig","Rooster","Spotted Deer"},
    ["Legendary Egg"] = {"Cow","Silver Monkey","Sea Otter","Turtle","Polar Bear"},
    ["Mythical Egg"] = {"Grey Mouse","Brown Mouse","Squirrel","Red Giant Ant","Red Fox"},
    ["Bug Egg"] = {"Snail","Giant Ant","Caterpillar","Praying Mantis","Dragonfly"},
    ["Bee Egg"] = {"Bee","Honey Bee","Bear Bee","Petal Bee","Queen Bee"},
    ["Paradise Egg"] = {"Ostrich","Peacock","Capybara","Scarlet Macaw","Mimic Octopus"},
    ["Oasis Egg"] = {"Meerkat","Sand Snake","Axolotl","Hyacinth Macaw"},
    ["Grow a Garden Egg"] = {"Sprout","Tiny Flower","Green Caterpillar","Garden Snail","Mystic Gnome"},
}

-- Clear old ESP entries
local espList = {}
local function clearESP()
    for _, gui in ipairs(espList) do
        if gui and gui.Parent then gui:Destroy() end
    end
    espList = {}
end

-- Create ESP label, with optional animation
local function createESP(part, eggName, petName, animate)
    if part:FindFirstChild("EggESP") then return end
    local gui = Instance.new("BillboardGui", part)
    gui.Name = "EggESP"
    gui.Size = UDim2.new(0, 140, 0, 36)
    gui.StudsOffset = Vector3.new(0, 2.2, 0)
    gui.Adornee = part
    gui.AlwaysOnTop = true

    local label = Instance.new("TextLabel", gui)
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.Text = eggName.." | "..petName
    label.TextScaled = true
    label.Font = Enum.Font.SourceSansBold
    label.TextStrokeTransparency = 0.3

    local pool = eggToPets[eggName]
    local isRare = (petName == pool[#pool])
    label.TextColor3 = isRare and Color3.fromRGB(255,70,70) or Color3.fromRGB(255,255,255)

    if animate then
        spawn(function()
            for i = 1, 3 do
                TweenService:Create(label, TweenInfo.new(0.25), {TextTransparency=0.8}):Play()
                wait(0.2)
                TweenService:Create(label, TweenInfo.new(0.25), {TextTransparency=0.2}):Play()
                wait(0.2)
            end
        end)
    end

    table.insert(espList, gui)
end

-- Choose a pet based on options
local function getRandomPet(eggName, forceRare, blockRare)
    local pool = eggToPets[eggName]
    if not pool then return "Unknown" end
    if forceRare then return pool[#pool] end
    if blockRare then return pool[math.random(1,#pool-1)] end
    return pool[math.random(1,#pool)]
end

-- Randomize eggs, with optional animation
local function randomizeEggs(forceRare, blockRare, animate)
    clearESP()
    local raresFound = {}
    for _, model in ipairs(Workspace:GetDescendants()) do
        if model:IsA("Model") and eggToPets[model.Name] then
            local part = model:FindFirstChildWhichIsA("BasePart")
            if part then
                local pet = getRandomPet(model.Name, forceRare, blockRare)
                createESP(part, model.Name, pet, animate)
                if pet == eggToPets[model.Name][#eggToPets[model.Name]] then
                    table.insert(raresFound, model.Name.." | "..pet)
                end
            end
        end
    end
    return raresFound
end

-- Loading screen (centered, no sound)
local loadingGui = Instance.new("ScreenGui", PlayerGui)
loadingGui.Name = "KuniLoading"
loadingGui.IgnoreGuiInset = true

local box = Instance.new("Frame", loadingGui)
box.Size = UDim2.new(0,300,0,100)
box.Position = UDim2.new(0.5, -150, 0.5, -50)
box.BackgroundColor3 = Color3.fromRGB(40,40,40)
box.BackgroundTransparency = 0.1
Instance.new("UICorner", box).CornerRadius=UDim.new(0,12)

local title = Instance.new("TextLabel", box)
title.Size=UDim2.new(1,0,0.4,0)
title.Position=UDim2.new(0,0,0,0)
title.Text="Kuni Hub"
title.Font=Enum.Font.Fantasy
title.TextColor3=Color3.fromRGB(255,215,0)
title.BackgroundTransparency=1
title.TextScaled=true

local status = Instance.new("TextLabel", box)
status.Size=UDim2.new(1,0,0.2,0)
status.Position=UDim2.new(0,0,0.4,0)
status.Text="Loading..."
status.Font=Enum.Font.GothamMedium
status.TextColor3=Color3.fromRGB(255,255,255)
status.BackgroundTransparency=1
status.TextScaled=true

local barBG = Instance.new("Frame", box)
barBG.Size=UDim2.new(0.9,0,0,8)
barBG.Position=UDim2.new(0.05,0,1,-20)
barBG.BackgroundColor3=Color3.fromRGB(60,60,60)
Instance.new("UICorner", barBG).CornerRadius=UDim.new(0,5)

local bar = Instance.new("Frame", barBG)
bar.Size=UDim2.new(0,0,1,0)
bar.BackgroundColor3=Color3.fromRGB(255,215,0)
Instance.new("UICorner", bar).CornerRadius=UDim.new(0,5)

-- Animate loading bar over 10 seconds
spawn(function()
    for i=1,30 do
        TweenService:Create(bar, TweenInfo.new(0.3), {Size=UDim2.new(i/30,0,1,0)}):Play()
        status.Text="Loading"..string.rep(".",i%4)
        wait(0.33)
    end
    loadingGui:Destroy()
end)

wait(10)  -- ensure 10s total

-- Main GUI
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "KuniHubGUI"
gui.IgnoreGuiInset = true

local frame = Instance.new("Frame", gui)
frame.Size=UDim2.new(0.8,0,0.5,0)  -- use scale for mobile
frame.Position=UDim2.new(0.1,0,0.25,0)
frame.BackgroundColor3=Color3.fromRGB(20,20,20)
frame.Active=true
frame.Draggable=true
Instance.new("UICorner", frame).CornerRadius=UDim.new(0,12)

-- Close button
local closeBtn = Instance.new("TextButton", frame)
closeBtn.Size=UDim2.new(0,32,0,32)
closeBtn.Position=UDim2.new(1,-40,0,8)
closeBtn.Text="âœ•"
closeBtn.Font=Enum.Font.SourceSansBold
closeBtn.TextColor3=Color3.new(1,0.4,0.4)
closeBtn.BackgroundTransparency=0.3
Instance.new("UICorner", closeBtn).CornerRadius=UDim.new(0,4)
closeBtn.MouseButton1Click:Connect(function() gui:Destroy() end)

-- Randomize button
local randomBtn = Instance.new("TextButton", frame)
randomBtn.Size=UDim2.new(0.9,0,0,40)
randomBtn.Position=UDim2.new(0.05,0,0.6,0)
randomBtn.Text="Randomize Pet"
randomBtn.Font=Enum.Font.SourceSansBold
randomBtn.TextColor3=Color3.fromRGB(255,215,0)
randomBtn.BackgroundColor3=Color3.fromRGB(40,40,40)
Instance.new("UICorner", randomBtn).CornerRadius=UDim.new(0,8)

-- AutoRoll button
local autoBtn = Instance.new("TextButton", frame)
autoBtn.Size=UDim2.new(0.9,0,0,40)
autoBtn.Position=UDim2.new(0.05,0,0.75,0)
autoBtn.Text="Auto Roll Get Rare"
autoBtn.Font=Enum.Font.SourceSansBold
autoBtn.TextColor3=Color3.fromRGB(255,215,0)
autoBtn.BackgroundColor3=Color3.fromRGB(70,40,40)
Instance.new("UICorner", autoBtn).CornerRadius=UDim.new(0,8)

-- Status label
local statusLabel = Instance.new("TextLabel", frame)
statusLabel.Size=UDim2.new(0.9,0,0,24)
statusLabel.Position=UDim2.new(0.05,0,0.45,0)
statusLabel.Text=""
statusLabel.Font=Enum.Font.SourceSans
statusLabel.TextColor3=Color3.fromRGB(255,255,255)
statusLabel.BackgroundTransparency=1
statusLabel.TextScaled=true
statusLabel.TextWrapped=true

-- Button logic
local canClick = true

randomBtn.MouseButton1Click:Connect(function()
    if not canClick then return end
    canClick=false
    statusLabel.Text="Randomizing..."
    randomizeEggs(false,false,true)
    wait(2)
    statusLabel.Text=""
    canClick=true
end)

autoBtn.MouseButton1Click:Connect(function()
    if not canClick then return end
    canClick=false
    statusLabel.Text="Rolling for rare pet..."
    local start = tick()
    while tick()-start < 39 do
        randomizeEggs(false,true,true)
        wait(2)
    end
    local rares = randomizeEggs(true,false,true)
    statusLabel.Font=Enum.Font.SourceSansBold
    statusLabel.TextColor3=Color3.fromRGB(255,70,70)
    statusLabel.Text = "#âƒ£ Found:\n" .. table.concat(rares,"\n")
    wait(3)
    statusLabel.Text=""
    statusLabel.TextColor3=Color3.fromRGB(255,255,255)
    canClick=true
end)
